# -*- coding: utf-8 -*-
"""app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/111g4Y9gPHIAAj9kLa364qHwgfcbP3hWX
"""

# app.py
import streamlit as st
import numpy as np
import pickle

# Táº£i mÃ´ hÃ¬nh vÃ  scaler
model = pickle.load(open("logistic_asd_model.pkl", "rb"))
scaler = pickle.load(open("scaler.pkl", "rb"))

st.title("ğŸ” á»¨ng dá»¥ng SÃ ng Lá»c Tá»± Ká»· (ASD)")

# Giao diá»‡n nháº­p thÃ´ng tin
def nhap_du_lieu():
    st.header("ğŸ“ Vui lÃ²ng nháº­p thÃ´ng tin:")
    scores = [st.slider(f"CÃ¢u há»i A{i+1}", 0, 1, 0, help="0 = KhÃ´ng, 1 = CÃ³") for i in range(10)]

    used_app_before = st.selectbox("Báº¡n Ä‘Ã£ tá»«ng sá»­ dá»¥ng á»©ng dá»¥ng nÃ y chÆ°a?", ["ChÆ°a", "Rá»“i"])
    jundice = st.selectbox("Tráº» cÃ³ bá»‹ vÃ ng da sau sinh khÃ´ng?", ["KhÃ´ng", "CÃ³"])
    austim = st.selectbox("Gia Ä‘Ã¬nh báº¡n cÃ³ ngÆ°á»i tá»«ng bá»‹ tá»± ká»· khÃ´ng?", ["KhÃ´ng", "CÃ³"])
    relation = st.selectbox("Báº¡n lÃ  ai Ä‘á»‘i vá»›i ngÆ°á»i Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡?", ["Bá»‘/máº¹", "Báº£n thÃ¢n", "NgÆ°á»i thÃ¢n khÃ¡c", "KhÃ¡c"])
    age_desc = st.selectbox("NhÃ³m tuá»•i cá»§a ngÆ°á»i Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡?", ["DÆ°á»›i 18 tuá»•i", "Tá»« 18 tuá»•i trá»Ÿ lÃªn"])

    # Chuyá»ƒn dá»¯ liá»‡u vá» dáº¡ng sá»‘
    mapping = {'KhÃ´ng': 0, 'CÃ³': 1, 'ChÆ°a': 0, 'Rá»“i': 1}
    used_app_before = mapping[used_app_before]
    jundice = mapping[jundice]
    austim = mapping[austim]
    relation_map = {'Báº£n thÃ¢n': 0, 'Bá»‘/máº¹': 1, 'NgÆ°á»i thÃ¢n khÃ¡c': 2, 'KhÃ¡c': 3}
    age_desc_map = {'DÆ°á»›i 18 tuá»•i': 0, 'Tá»« 18 tuá»•i trá»Ÿ lÃªn': 1}

    input_data = scores + [used_app_before, jundice, relation_map[relation], austim, age_desc_map[age_desc]]
    return np.array(input_data).reshape(1, -1)

X_input = nhap_du_lieu()

if st.button("ğŸ” Dá»± Ä‘oÃ¡n"):
    X_input_scaled = scaler.transform(X_input)
    result = model.predict(X_input_scaled)[0]
    if result == 1:
        st.error("âš ï¸ Báº¡n Ä‘ang cÃ³ dáº¥u hiá»‡u Tá»± Ká»·. Vui lÃ²ng tham kháº£o Ã½ kiáº¿n bÃ¡c sÄ© chuyÃªn khoa.")
    else:
        st.success("âœ… KhÃ´ng cÃ³ dáº¥u hiá»‡u Tá»± Ká»· rÃµ rÃ ng.")




    # --- Gá»£i Ã½ tiáº¿p theo ---
    st.markdown("### ğŸ§­ Gá»£i Ã½ hÃ nh Ä‘á»™ng tiáº¿p theo:")
    if pred == 1:
        st.info("""
        ğŸ”¹ HÃ£y liÃªn há»‡ chuyÃªn gia tÃ¢m lÃ½ hoáº·c cÆ¡ sá»Ÿ y táº¿ Ä‘á»ƒ Ä‘Æ°á»£c tÆ° váº¥n ká»¹ lÆ°á»¡ng hÆ¡n.
        ğŸ”¹ Ghi chÃ©p láº¡i cÃ¡c biá»ƒu hiá»‡n thÆ°á»ng gáº·p trong cuá»™c sá»‘ng hÃ ng ngÃ y.
        ğŸ”¹ CÃ³ thá»ƒ tham kháº£o cÃ¡c tÃ i liá»‡u vá» ASD tá»« WHO, CDC hoáº·c cÃ¡c trung tÃ¢m há»— trá»£ trong nÆ°á»›c.
        """)
    else:
        st.success("""
        âœ… Báº¡n cÃ³ thá»ƒ yÃªn tÃ¢m á»Ÿ thá»i Ä‘iá»ƒm hiá»‡n táº¡i.
        ğŸ”¹ Viá»‡c phÃ¡t triá»ƒn ká»¹ nÄƒng xÃ£ há»™i vÃ  cáº£m xÃºc váº«n á»•n.
        ğŸ”¹ Náº¿u cÃ²n bÄƒn khoÄƒn, báº¡n cÃ³ thá»ƒ trao Ä‘á»•i thÃªm vá»›i chuyÃªn gia.
        """)

